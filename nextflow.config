process {
    executor = 'slurm'
    withName:sam_sort {
        clusterOptions = "--cpus-per-task=12 --mem 10G --time=6:00:00"
        container="ghcr.io/bwbioinfo/samtools-docker-cwl:latest"
        }
    withLabel:minimap {
        clusterOptions = "--cpus-per-task=12 --mem 10G --time=12:00:00"
        container="ghcr.io/bwbioinfo/minimap2-docker-cwl:latest"
        }
    withLabel:cat {
        clusterOptions = "--cpus-per-task=2 --mem 5G --time=2:00:00"
    }
    withName:mosdepth {
        clusterOptions = "--cpus-per-task=10 --mem 10G --time=4:00:00"
        container="quay.io/biocontainers/mosdepth:0.3.3--h37c5b7d_2"
    }
    withName:multiqc {
        clusterOptions = "--cpus-per-task=3 --mem 5G --time=1:00:00"
        container="staphb/multiqc:latest"
    }
    withLabel:deeptools {
        clusterOptions = "--cpus-per-task=20 --mem 30G --time=6:00:00"
        container="ghcr.io/bwbioinfo/deeptools-docker-cwl:latest"
    }
}
        
params {
    out_dir="${launchDir}"
    in_dir=null
    threads = 10
    csv = null
}

apptainer {
    enabled=true
    autoMounts=true
    runOptions = "-B  /lustre05,/lustre06,/lustre07,/scratch,/project"
    libraryDir = "/project/ctb-noncodo/Platform/references/apptainer/images"
    cacheDir = "/project/ctb-noncodo/Platform/references/apptainer/cache"
}

executor {
  pollInterval = '60 sec'
  submitRateLimit = '60/1min'
  queueSize = 100 
}